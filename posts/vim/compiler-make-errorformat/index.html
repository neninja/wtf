<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Compiler, make e errorformat | WTF</title><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="Execução de comandos no Vim"><link rel=icon href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>%e2%9c%a8</text></svg>"><meta property="og:title" content="Compiler, make e errorformat"><meta property="og:description" content="Execução de comandos no Vim"><meta property="og:type" content="article"><meta property="og:url" content="https://wtf.neni.dev/posts/vim/compiler-make-errorformat/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-08-24T10:00:00-03:00"><meta property="article:modified_time" content="2020-08-24T10:00:00-03:00"><meta itemprop=name content="Compiler, make e errorformat"><meta itemprop=description content="Execução de comandos no Vim"><meta itemprop=datePublished content="2020-08-24T10:00:00-03:00"><meta itemprop=dateModified content="2020-08-24T10:00:00-03:00"><meta itemprop=wordCount content="727"><meta itemprop=keywords content="vim,"><meta name=twitter:card content="summary"><meta name=twitter:title content="Compiler, make e errorformat"><meta name=twitter:description content="Execução de comandos no Vim"><link rel=stylesheet href=/sass/main.min.c44f64e907510667317656285b596c55db57c8d115610382304472387040b7bf.css><link rel=stylesheet href=/sass/layouts/single.min.0eb9a2da2df1ebb163bf7d2519f57722d6720f5b660d90c0b1ce3318f7aa360c.css></head><body><header class=menu><nav role=navigation><ul><li><a href=https://wtf.neni.dev>WTF</a></li><li><a href=http://neni.dev>Neni</a></li></ul></nav></header><main><article><header><time class=datepost datetime=2020-08-24T10:00:00-03:00>24/08/2020</time><div class=container-singlepost-title><h1>Compiler, make e errorformat</h1><a class=fixme href=http://github.com/nenitf/blog_projeto-bilingue/edit/main/content/posts/vim/compiler-make-errorformat.md><code>fixme</code></a></div><ul class=tags><li><a href=/tags/vim>#vim</a></li></ul></header><p>Vim tem embutido uma forma de interpretar mensagens de erro, facilitando o pulo para o arquivo apontado na mensagem.</p><p>Essa interpretação é feita através da lista da variável <code>errorformat</code>, cujo lê a mensagem e encaixa no primeiro &ldquo;regex&rdquo;.</p><hr><p>Exemplo com <a href=https://golang.org/>Go</a></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>

<span style=color:#f92672>import</span> (
	<span style=color:#e6db74>&#34;fmt&#34;</span>
)

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
	<span style=color:#a6e22e>msg</span> = <span style=color:#e6db74>&#34;Exemplo de texto&#34;</span>
	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>msg</span>)
}
</code></pre></div><p>O output é:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt># command-line-arguments
.\main.go:8:2: undefined: msg
.\main.go:9:14: undefined: msg   
</code></pre></div><p>Para configurar de maneira simples, primeiro precisamos definir o <code>makeprg</code> responsável por executar o arquivo e após as tratativa de linhas de erro em <code>errorformat</code>.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#75715e>&#34; dentro de &lt;runtimepath&gt;/ftplugin/go.vim</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>
</span><span style=color:#75715e>&#34; go run &lt;nome do buffer&gt;</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>setl</span> <span style=color:#a6e22e>makeprg</span>=<span style=color:#a6e22e>go</span>\ <span style=color:#a6e22e>run</span>\ %<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>setl</span> <span style=color:#a6e22e>errorformat</span>=%<span style=color:#a6e22e>f</span>:%<span style=color:#a6e22e>l</span>:%<span style=color:#a6e22e>c</span>:\ %<span style=color:#a6e22e>m</span>,%-<span style=color:#a6e22e>G</span>%.%#<span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>Agora basta executar <code>:make|cw</code> que a janela de <em>quickfix</em> vai abrir, permitindo acessar o arquivo com erro.</p><p><img src=https://dev-to-uploads.s3.amazonaws.com/i/7t27cmlp6j3w8aaafuv0.gif alt="Alt Text"></p><p><strong>Sugestão</strong>: Crie um map para executar o comando, como <code>nmap &lt;space>r :silent make|cw&lt;CR></code></p><h2 id=formatação-do-errorformat>Formatação do errorformat</h2><p>Instruções do <em>errorformat</em></p><ol><li>É uma variável que recebe uma lista separada por vírgula</li><li>Assim que bater na primeira &ldquo;regex&rdquo; para de processar demais regras</li><li>O regex implícito básico funciona sempre iniciando com <code>%</code></li><li>Caso seja necessário utilizar espaço, pode ser feito com <code>\</code></li></ol><h3 id=unidades>Unidades</h3><ul><li><p><code>%f</code>
Nome de arquivo</p></li><li><p><code>%l</code>
Numero da linha</p></li><li><p><code>%c</code>
Numero da coluna</p></li><li><p><code>%m</code>
Mensagem de erro</p></li><li><p><code>\\s</code>
Espaço</p></li><li><p><code>%#</code>
Zero ou mais</p></li><li><p><code>%\\+</code>
Um ou mais</p></li><li><p><code>%A</code>
Inicia erro que possui múltiplas linhas</p></li><li><p><code>%C</code>
Continuação da mensagem de erro que possui múltiplas linhas. Agrega valor ao regex com <code>%A</code> prévio.</p></li><li><p><code>%Z</code>
Ultima linha da mensagem de erro que possui múltiplas linhas. Agrega valor ao regex com <code>%A</code> prévio.</p></li><li><p><code>%-G</code>
Ignora a mensagem que seguir com o padrão</p></li></ul><h3 id=usos-comuns>Usos comuns</h3><table><thead><tr><th>código</th><th>interpretação</th><th>exemplo</th></tr></thead><tbody><tr><td><code>%f:%l:%c\ %m</code></td><td>filename:linha:coluna espaço mensagem restante</td><td><code>main.go:8:2 undefined: msg</code></td></tr><tr><td><code>%.%#</code></td><td>.*</td><td><code>qualquer texto</code></td></tr><tr><td><code>%-G%.%#</code></td><td>.*</td><td><code>Ignora quaisquer textos</code></td></tr></tbody></table><h2 id=compiler>Compiler</h2><blockquote><p><code>:h write-compiler-plugin</code></p></blockquote><p>Um compilador é uma configuração pronta de <code>makeprg</code> e <code>errorformat</code> com nome, facilitando sua troca. Por exemplo, com Go podemos ter um <code>compiler</code> <em>gorun</em> que serve para executar o código e outro como <em>gotest</em> para testá-lo, e assim tratar de maneira diferente os erros e a execução.
Existe uma convenção para a escrita de <em>compilers</em>, precisando ficar em <code>/compiler</code> dentro do <code>runtimepath</code>. O Vim já possui diversos, basta copiar a estrutura e atualizar o nome do compiler, <code>makeprg</code> e <code>errorformat</code>.
Abaixo <em>gorun</em> e <em>gotest</em> mencionados e outros úteis:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#75715e>&#34; Vim compiler file</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>&#34; Compiler:     Go</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>&#34; Maintainer:	Felipe Silva</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>&#34; Last Change:	2020 Sep 17</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>if</span> <span style=color:#a6e22e>exists</span>(<span style=color:#e6db74>&#39;current_compiler&#39;</span>)<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>  <span style=color:#a6e22e>finish</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>endif</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>current_compiler</span> = <span style=color:#e6db74>&#39;gorun&#39;</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>if</span> <span style=color:#a6e22e>exists</span>(<span style=color:#e6db74>&#39;:CompilerSet&#39;</span>) != <span style=color:#ae81ff>2</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>  <span style=color:#a6e22e>command</span> -<span style=color:#a6e22e>nargs</span>=* <span style=color:#a6e22e>CompilerSet</span> <span style=color:#a6e22e>setlocal</span> &lt;<span style=color:#a6e22e>args</span>&gt;<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>endif</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>s</span>:<span style=color:#a6e22e>save_cpo</span> = &amp;<span style=color:#a6e22e>cpo</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>set</span> <span style=color:#a6e22e>cpo</span>-=<span style=color:#a6e22e>C</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>CompilerSet</span> <span style=color:#a6e22e>makeprg</span>=<span style=color:#a6e22e>go</span>\ <span style=color:#a6e22e>run</span>\ %<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>
</span><span style=color:#75715e>&#34; THANKS: http://vimdoc.sourceforge.net/htmldoc/quickfix.html#errorformat-LaTeX</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>&#34; THANKS: https://flukus.github.io/vim-errorformat-demystified.html</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>&#34; THANKS: https://stackoverflow.com/a/29102995/9881278</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>&#34; THANKS: https://github.com/wincent/wincent/blob/b38dc93bb5/roles/dotfiles/files/.vim/after/compiler/README.md</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>CompilerSet</span> <span style=color:#a6e22e>errorformat</span>=%-<span style=color:#a6e22e>G</span>#%.%#<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>CompilerSet</span> <span style=color:#a6e22e>errorformat</span>+=%-<span style=color:#a6e22e>G</span>%.%#<span style=color:#a6e22e>panic</span>:\ %<span style=color:#a6e22e>m</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>CompilerSet</span> <span style=color:#a6e22e>errorformat</span>+=<span style=color:#a6e22e>can</span>\&#39;<span style=color:#a6e22e>t</span>\ <span style=color:#a6e22e>load</span>\ <span style=color:#a6e22e>package</span>:\ %<span style=color:#a6e22e>m</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>CompilerSet</span> <span style=color:#a6e22e>errorformat</span>+=%<span style=color:#a6e22e>f</span>:%<span style=color:#a6e22e>l</span>:%<span style=color:#a6e22e>c</span>:\ %<span style=color:#a6e22e>m</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>CompilerSet</span> <span style=color:#a6e22e>errorformat</span>+=%<span style=color:#a6e22e>f</span>:%<span style=color:#a6e22e>l</span>:\ %<span style=color:#a6e22e>m</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>CompilerSet</span> <span style=color:#a6e22e>errorformat</span>+=%*\\<span style=color:#a6e22e>s</span>%<span style=color:#a6e22e>f</span>:%<span style=color:#a6e22e>l</span>\ %<span style=color:#a6e22e>m</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>CompilerSet</span> <span style=color:#a6e22e>errorformat</span>+=%<span style=color:#a6e22e>C</span>%<span style=color:#a6e22e>m</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>let</span> &amp;<span style=color:#a6e22e>cpo</span> = <span style=color:#a6e22e>s</span>:<span style=color:#a6e22e>save_cpo</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>unlet</span> <span style=color:#a6e22e>s</span>:<span style=color:#a6e22e>save_cpo</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>
</span><span style=color:#75715e>&#34; vim: sw=2 sts=2 et</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#75715e>&#34; Vim compiler file</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>&#34; Compiler:	    Go</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>&#34; Maintainer:	Felipe Silva</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>&#34; Last Change:	2021 Nov 2</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>if</span> <span style=color:#a6e22e>exists</span>(<span style=color:#e6db74>&#39;current_compiler&#39;</span>)<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>  <span style=color:#a6e22e>finish</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>endif</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>current_compiler</span> = <span style=color:#e6db74>&#39;goimports&#39;</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>if</span> <span style=color:#a6e22e>exists</span>(<span style=color:#e6db74>&#39;:CompilerSet&#39;</span>) != <span style=color:#ae81ff>2</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>  <span style=color:#a6e22e>command</span> -<span style=color:#a6e22e>nargs</span>=* <span style=color:#a6e22e>CompilerSet</span> <span style=color:#a6e22e>setlocal</span> &lt;<span style=color:#a6e22e>args</span>&gt;<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>endif</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>s</span>:<span style=color:#a6e22e>save_cpo</span> = &amp;<span style=color:#a6e22e>cpo</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>set</span> <span style=color:#a6e22e>cpo</span>-=<span style=color:#a6e22e>C</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>CompilerSet</span> <span style=color:#a6e22e>makeprg</span>=<span style=color:#a6e22e>goimports</span>\ -<span style=color:#a6e22e>w</span>\ %<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>CompilerSet</span> <span style=color:#a6e22e>errorformat</span>+=%<span style=color:#a6e22e>f</span>:%<span style=color:#a6e22e>l</span>:%<span style=color:#a6e22e>c</span>:\ %<span style=color:#a6e22e>m</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>CompilerSet</span> <span style=color:#a6e22e>errorformat</span>+=%<span style=color:#a6e22e>f</span>:%<span style=color:#a6e22e>l</span>:\ %<span style=color:#a6e22e>m</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>let</span> &amp;<span style=color:#a6e22e>cpo</span> = <span style=color:#a6e22e>s</span>:<span style=color:#a6e22e>save_cpo</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>unlet</span> <span style=color:#a6e22e>s</span>:<span style=color:#a6e22e>save_cpo</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>
</span><span style=color:#75715e>&#34; vim: sw=2 sts=2 et</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#75715e>&#34; Vim compiler file</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>&#34; Compiler:     Go</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>&#34; Maintainer:	Felipe Silva</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>&#34; Last Change:	2020 Sep 17</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>if</span> <span style=color:#a6e22e>exists</span>(<span style=color:#e6db74>&#39;current_compiler&#39;</span>)<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>  <span style=color:#a6e22e>finish</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>endif</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>current_compiler</span> = <span style=color:#e6db74>&#39;gotest&#39;</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>if</span> <span style=color:#a6e22e>exists</span>(<span style=color:#e6db74>&#39;:CompilerSet&#39;</span>) != <span style=color:#ae81ff>2</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>  <span style=color:#a6e22e>command</span> -<span style=color:#a6e22e>nargs</span>=* <span style=color:#a6e22e>CompilerSet</span> <span style=color:#a6e22e>setlocal</span> &lt;<span style=color:#a6e22e>args</span>&gt;<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>endif</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>s</span>:<span style=color:#a6e22e>save_cpo</span> = &amp;<span style=color:#a6e22e>cpo</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>set</span> <span style=color:#a6e22e>cpo</span>-=<span style=color:#a6e22e>C</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>CompilerSet</span> <span style=color:#a6e22e>makeprg</span>=<span style=color:#a6e22e>go</span>\ <span style=color:#a6e22e>test</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>
</span><span style=color:#75715e>&#34; THANKS: http://vimdoc.sourceforge.net/htmldoc/quickfix.html#errorformat-LaTeX</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>&#34; THANKS: https://flukus.github.io/vim-errorformat-demystified.html</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>&#34; THANKS: https://stackoverflow.com/a/29102995/9881278</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>&#34; THANKS: https://github.com/wincent/wincent/blob/b38dc93bb5/roles/dotfiles/files/.vim/after/compiler/README.md</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>CompilerSet</span> <span style=color:#a6e22e>errorformat</span>=%-<span style=color:#a6e22e>G</span>#%.%#<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>CompilerSet</span> <span style=color:#a6e22e>errorformat</span>+=%-<span style=color:#a6e22e>G</span>%.%#<span style=color:#a6e22e>panic</span>:\ %<span style=color:#a6e22e>m</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>CompilerSet</span> <span style=color:#a6e22e>errorformat</span>+=%-<span style=color:#a6e22e>GFAIL</span>%.%#<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>CompilerSet</span> <span style=color:#a6e22e>errorformat</span>+=%-<span style=color:#a6e22e>Gexit</span>%.%#<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>CompilerSet</span> <span style=color:#a6e22e>errorformat</span>+=%-<span style=color:#a6e22e>GPASS</span>%.%#<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>CompilerSet</span> <span style=color:#a6e22e>errorformat</span>+=%-<span style=color:#a6e22e>Gok</span>%.%#<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>CompilerSet</span> <span style=color:#a6e22e>errorformat</span>+=<span style=color:#a6e22e>can</span>\&#39;<span style=color:#a6e22e>t</span>\ <span style=color:#a6e22e>load</span>\ <span style=color:#a6e22e>package</span>:\ %<span style=color:#a6e22e>m</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>CompilerSet</span> <span style=color:#a6e22e>errorformat</span>+=%<span style=color:#a6e22e>f</span>:%<span style=color:#a6e22e>l</span>:%<span style=color:#a6e22e>c</span>:\ %<span style=color:#a6e22e>m</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>CompilerSet</span> <span style=color:#a6e22e>errorformat</span>+=%<span style=color:#a6e22e>f</span>:%<span style=color:#a6e22e>l</span>:\ %<span style=color:#a6e22e>m</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>CompilerSet</span> <span style=color:#a6e22e>errorformat</span>+=%*\\<span style=color:#a6e22e>s</span>%<span style=color:#a6e22e>f</span>:%<span style=color:#a6e22e>l</span>\ %<span style=color:#a6e22e>m</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>CompilerSet</span> <span style=color:#a6e22e>errorformat</span>+=%+<span style=color:#a6e22e>A</span>---\ <span style=color:#a6e22e>FAIL</span>:\ <span style=color:#a6e22e>Example</span>%.%#<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>CompilerSet</span> <span style=color:#a6e22e>errorformat</span>+=%<span style=color:#a6e22e>C</span>%<span style=color:#a6e22e>m</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>let</span> &amp;<span style=color:#a6e22e>cpo</span> = <span style=color:#a6e22e>s</span>:<span style=color:#a6e22e>save_cpo</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>unlet</span> <span style=color:#a6e22e>s</span>:<span style=color:#a6e22e>save_cpo</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>
</span><span style=color:#75715e>&#34; vim: sw=2 sts=2 et</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#75715e>&#34; Vim compiler file</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>&#34; Compiler:     PHP</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>&#34; Maintainer:	Felipe Silva</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>&#34; Last Change:	2020 Sep 30</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>if</span> <span style=color:#a6e22e>exists</span>(<span style=color:#e6db74>&#39;current_compiler&#39;</span>)<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>  <span style=color:#a6e22e>finish</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>endif</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>current_compiler</span> = <span style=color:#e6db74>&#39;phplint&#39;</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>if</span> <span style=color:#a6e22e>exists</span>(<span style=color:#e6db74>&#39;:CompilerSet&#39;</span>) != <span style=color:#ae81ff>2</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>  <span style=color:#a6e22e>command</span> -<span style=color:#a6e22e>nargs</span>=* <span style=color:#a6e22e>CompilerSet</span> <span style=color:#a6e22e>setlocal</span> &lt;<span style=color:#a6e22e>args</span>&gt;<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>endif</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>s</span>:<span style=color:#a6e22e>save_cpo</span> = &amp;<span style=color:#a6e22e>cpo</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>set</span> <span style=color:#a6e22e>cpo</span>-=<span style=color:#a6e22e>C</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>CompilerSet</span> <span style=color:#a6e22e>makeprg</span>=<span style=color:#a6e22e>php</span>\ -<span style=color:#a6e22e>ln</span>\ %<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>
</span><span style=color:#75715e>&#34; THANKS: http://vimdoc.sourceforge.net/htmldoc/quickfix.html#errorformat-LaTeX</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>&#34; THANKS: https://flukus.github.io/vim-errorformat-demystified.html</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>&#34; THANKS: https://stackoverflow.com/a/29102995/9881278</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>&#34; THANKS: https://github.com/wincent/wincent/blob/b38dc93bb5/roles/dotfiles/files/.vim/after/compiler/README.md</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>
</span><span style=color:#75715e>&#34; THANKS: https://stackoverflow.com/a/7272248/9881278</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>&#34; THANKS: https://stackoverflow.com/a/7193830/9881278</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>&#34; THANKS: https://vim.fandom.com/wiki/Runtime_syntax_check_for_php</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>CompilerSet</span> <span style=color:#a6e22e>errorformat</span>=<span style=color:#a6e22e>Parse</span>\ <span style=color:#a6e22e>error</span>:\ %<span style=color:#a6e22e>m</span>\ <span style=color:#a6e22e>in</span>\ %<span style=color:#a6e22e>f</span>\ <span style=color:#a6e22e>on</span>\ <span style=color:#a6e22e>line</span>\ %<span style=color:#a6e22e>l</span>,%-<span style=color:#a6e22e>GErrors</span>\ <span style=color:#a6e22e>parsing</span>\ %<span style=color:#a6e22e>f</span>,%-<span style=color:#a6e22e>G</span>%.%#<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>&#34; CompilerSet errorformat=%m\ in\ %f\ on\ line\ %l,%-GErrors\ parsing\ %f,%-G</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>&#34; CompilerSet errorformat=PHP\ Parse\ error:\ %m\ in\ %f\ on\ line\ %l,%-GErrors\ parsing\ %f,%-G%.%#</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>let</span> &amp;<span style=color:#a6e22e>cpo</span> = <span style=color:#a6e22e>s</span>:<span style=color:#a6e22e>save_cpo</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>unlet</span> <span style=color:#a6e22e>s</span>:<span style=color:#a6e22e>save_cpo</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>
</span><span style=color:#75715e>&#34; vim: sw=2 sts=2 et</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#75715e>&#34; Vim compiler file</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>&#34; Compiler:     PHP</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>&#34; Maintainer:	Felipe Silva</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>&#34; Last Change:	2020 Sep 30</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>if</span> <span style=color:#a6e22e>exists</span>(<span style=color:#e6db74>&#39;current_compiler&#39;</span>)<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>  <span style=color:#a6e22e>finish</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>endif</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>current_compiler</span> = <span style=color:#e6db74>&#39;phpunit&#39;</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>if</span> <span style=color:#a6e22e>exists</span>(<span style=color:#e6db74>&#39;:CompilerSet&#39;</span>) != <span style=color:#ae81ff>2</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>  <span style=color:#a6e22e>command</span> -<span style=color:#a6e22e>nargs</span>=* <span style=color:#a6e22e>CompilerSet</span> <span style=color:#a6e22e>setlocal</span> &lt;<span style=color:#a6e22e>args</span>&gt;<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>endif</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>s</span>:<span style=color:#a6e22e>save_cpo</span> = &amp;<span style=color:#a6e22e>cpo</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>set</span> <span style=color:#a6e22e>cpo</span>-=<span style=color:#a6e22e>C</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>CompilerSet</span> <span style=color:#a6e22e>makeprg</span>=<span style=color:#a6e22e>composer</span>\ <span style=color:#a6e22e>test</span>\ %<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>
</span><span style=color:#75715e>&#34; THANKS: http://vimdoc.sourceforge.net/htmldoc/quickfix.html#errorformat-LaTeX</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>&#34; THANKS: https://flukus.github.io/vim-errorformat-demystified.html</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>&#34; THANKS: https://stackoVerflow.com/a/29102995/9881278</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>&#34; THANKS: https://github.com/wincent/wincent/blob/b38dc93bb5/roles/dotfiles/files/.vim/after/compiler/README.md</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>
</span><span style=color:#75715e>&#34; THANKS: https://stackoverflow.com/a/5296062/9881278</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>&#34; THANKS: https://github.com/haginaga/vim-compiler-phpunit</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>CompilerSet</span> <span style=color:#a6e22e>errorformat</span>=%<span style=color:#a6e22e>E</span>%<span style=color:#a6e22e>n</span>)\ %.%#:%<span style=color:#a6e22e>o</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>CompilerSet</span> <span style=color:#a6e22e>errorformat</span>+=%-<span style=color:#a6e22e>G</span>%.%#<span style=color:#a6e22e>FAILURES</span>!%.%#<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>CompilerSet</span> <span style=color:#a6e22e>errorformat</span>+=%-<span style=color:#a6e22e>G</span>%.%#<span style=color:#a6e22e>WARNINGS</span>!%.%#<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>CompilerSet</span> <span style=color:#a6e22e>errorformat</span>+=<span style=color:#a6e22e>Fatal</span>\ <span style=color:#a6e22e>error</span>:\ %<span style=color:#a6e22e>m</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>CompilerSet</span> <span style=color:#a6e22e>errorformat</span>+=%<span style=color:#a6e22e>Z</span>%<span style=color:#a6e22e>f</span>:%<span style=color:#a6e22e>l</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>CompilerSet</span> <span style=color:#a6e22e>errorformat</span>+=%<span style=color:#a6e22e>W</span>%<span style=color:#a6e22e>f</span>:%<span style=color:#a6e22e>l</span>:<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>CompilerSet</span> <span style=color:#a6e22e>errorformat</span>+=%<span style=color:#a6e22e>C</span>%<span style=color:#a6e22e>m</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>CompilerSet</span> <span style=color:#a6e22e>errorformat</span>+=%<span style=color:#a6e22e>C</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>CompilerSet</span> <span style=color:#a6e22e>errorformat</span>+=%-<span style=color:#a6e22e>G</span>%.%#<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>let</span> &amp;<span style=color:#a6e22e>cpo</span> = <span style=color:#a6e22e>s</span>:<span style=color:#a6e22e>save_cpo</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>unlet</span> <span style=color:#a6e22e>s</span>:<span style=color:#a6e22e>save_cpo</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>
</span><span style=color:#75715e>&#34; vim: sw=2 sts=2 et</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>Para trocar de um para outro basta utilizar <code>:compiler &lt;nome></code>, por exemplo: <code>:compiler gorun</code> ou <code>:compiler gotest</code>.</p><h2 id=créditos>Créditos:</h2><ul><li><a href=https://github.com/wincent/wincent/blob/b38dc93bb5/roles/dotfiles/files/.vim/after/compiler/README.md>Wincent</a></li><li><a href=https://flukus.github.io/vim-errorformat-demystified.html>flukus</a></li><li><a href=https://vi.stackexchange.com/a/4808/28875>Go format</a></li><li><a href=http://vimdoc.sourceforge.net/htmldoc/quickfix.html#errorformat-LaTeX>vimdoc</a></li><li><a href=https://stackoverflow.com/a/29102995/9881278>Duvidas gerais</a></li></ul></article></main></body></html>