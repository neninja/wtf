<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Vimdiff como mergetool | WTF</title><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="Resolvendo conflitos de maneira simplificada e guiada"><link rel=icon href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>%e2%9c%a8</text></svg>"><meta property="og:title" content="Vimdiff como mergetool"><meta property="og:description" content="Resolvendo conflitos de maneira simplificada e guiada"><meta property="og:type" content="article"><meta property="og:url" content="https://wtf.neni.dev/vimdiff-mergetool/"><meta property="article:section" content><meta property="article:published_time" content="2023-03-18T02:57:00-03:00"><meta property="article:modified_time" content="2023-03-18T02:57:00-03:00"><meta itemprop=name content="Vimdiff como mergetool"><meta itemprop=description content="Resolvendo conflitos de maneira simplificada e guiada"><meta itemprop=datePublished content="2023-03-18T02:57:00-03:00"><meta itemprop=dateModified content="2023-03-18T02:57:00-03:00"><meta itemprop=wordCount content="258"><meta itemprop=keywords content="git,vim,"><meta name=twitter:card content="summary"><meta name=twitter:title content="Vimdiff como mergetool"><meta name=twitter:description content="Resolvendo conflitos de maneira simplificada e guiada"><link rel=stylesheet href=/sass/main.min.c44f64e907510667317656285b596c55db57c8d115610382304472387040b7bf.css><link rel=stylesheet href=/sass/layouts/single.min.2ac41ecc84e7a8dff8f25f47da427458e5a244970591340de3846165b3c92338.css></head><body><header class=menu><nav role=navigation><ul><li><a href=https://wtf.neni.dev>WTF</a></li><li><a href=http://neni.dev>Neni</a></li></ul></nav></header><main><header><time class=datepost datetime=2023-03-18T02:57:00-03:00 title="18th of March 2023">18/03/2023</time><div class=container-singlepost-title><h1>Vimdiff como mergetool</h1><a class=fixme href=http://github.com/neninja/wtf/edit/main/content/vimdiff-mergetool.md><code>fixme</code></a></div><ul class=tags><li><a href=/tags/git>#git</a></li><li><a href=/tags/vim>#vim</a></li></ul></header><article><ol><li>Com Vimdiff devidamente configurado <code>git config merge.tool vimdiff</code>, execute <code>git mergetool</code></li><li>O terminal renderizará com 4 janelas, sendo as 3 de cima representando em ordem e a ultima:<ol><li>O arquivo <strong>LOCAL</strong> antes do conflito</li><li>O arquivo <strong>BASE</strong> (comum) do local e ao remoto</li><li>O arquivo vindo do <strong>REMOTE</strong>.</li><li>Em baixo como o arquivo está sendo mergeado para o commit</li></ol></li><li>De preferência mantenha seu cursor de preferencia sempre na janela maior</li><li>Acesse algum diff</li><li>Utilize <code>:diffg NOME-DO-ARQUIVO</code> para escolher uma das modificações se achar necessário<ul><li><code>:diffg LO</code> utiliza o diff de <strong>LO</strong> CAL</li><li><code>:diffg BA</code> utiliza o diff de <strong>BA</strong> SE (raro ser usado)</li><li><code>:diffg RE</code> utiliza o diff de <strong>RE</strong> MOTE</li><li>Ou altere o arquivo na mão</li></ul></li><li>Ao finalizar todas modificações que julgar necessário <strong>SALVE</strong> e <strong>SAIA</strong> com <code>:wqa</code></li><li>Se existir, um novo arquivo com conflito será aberto, do contrário ficará no terminal aguardando commit</li></ol><h2 id=desistência>Desistência</h2><ol><li>Caso queira cancelar, saia com <code>:cq</code></li><li>Aborte o merge com <code>git merge --abort</code></li></ol><h2 id=atalhos-úteis>Atalhos úteis</h2><ul><li><code>ctrl-w-w</code> alterna</li><li><code>[c</code> e <code>]c</code> pula entre os diffs</li></ul><h2 id=alternativas>Alternativas</h2><h3 id=diffconflictshttpsgithubcomwhiteingediffconflicts><a href=https://github.com/whiteinge/diffconflicts>diffconflicts</a></h3><p>Plugin de vim/nvim que simplifica o diff entre os arquivos abertos, tendo somente duas janelas: <code>ours</code> e <code>theirs</code>, sendo a primeira a que deve ser atualizada. A ideia é interessante pois simplifica a quantidade de janelas para a efetividade do diff e por padrão ja presupoe que <code>ours</code> é correto. Basta alterar a janela especificada e fechar para confirmar com <code>:xa</code> ou <code>:cq</code> para abortar aquele arquivo.</p><h2 id=exemplo-prático>Exemplo prático</h2><p>Para validar estratégias de merge tool, recomendo meu projeto <a href=https://github.com/neninja/exemplo_vim-merge-conflict>exemplo_vim-merge-conflict</a> com as instruções de como forçar conflitos</p></article></main></body></html>