<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Utilização básica do Docker com docker-compose | WTF</title><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="Fluxo de utilização comum em projetos pessoais com Docker"><link rel=icon href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>%e2%9c%a8</text></svg>"><meta property="og:title" content="Utilização básica do Docker com docker-compose"><meta property="og:description" content="Fluxo de utilização comum em projetos pessoais com Docker"><meta property="og:type" content="article"><meta property="og:url" content="https://wtf.neni.dev/basico-docker/"><meta property="article:section" content><meta property="article:published_time" content="2021-07-19T10:00:00-03:00"><meta property="article:modified_time" content="2021-07-19T10:00:00-03:00"><meta itemprop=name content="Utilização básica do Docker com docker-compose"><meta itemprop=description content="Fluxo de utilização comum em projetos pessoais com Docker"><meta itemprop=datePublished content="2021-07-19T10:00:00-03:00"><meta itemprop=dateModified content="2021-07-19T10:00:00-03:00"><meta itemprop=wordCount content="962"><meta itemprop=keywords content="docker,"><meta name=twitter:card content="summary"><meta name=twitter:title content="Utilização básica do Docker com docker-compose"><meta name=twitter:description content="Fluxo de utilização comum em projetos pessoais com Docker"><link rel=stylesheet href=/sass/main.min.c44f64e907510667317656285b596c55db57c8d115610382304472387040b7bf.css><link rel=stylesheet href=/sass/layouts/single.min.2ac41ecc84e7a8dff8f25f47da427458e5a244970591340de3846165b3c92338.css></head><body><header class=menu><nav role=navigation><ul><li><a href=https://wtf.neni.dev>WTF</a></li><li><a href=http://neni.dev>Neni</a></li></ul></nav></header><main><header><time class=datepost datetime=2021-07-19T10:00:00-03:00 title="19th of July 2021">19/07/2021</time><div class=container-singlepost-title><h1>Utilização básica do Docker com docker-compose</h1><a class=fixme href=http://github.com/neninja/wtf/edit/main/content/basico-docker.md><code>fixme</code></a></div><ul class=tags><li><a href=/tags/docker>#docker</a></li></ul></header><article><h2 id=comandos>Comandos</h2><p>Utilizando <a href=https://docs.docker.com/compose/install/>Docker Compose</a>, dentro do projeto com o arquivo <code>docker-compose.yml</code> criado:</p><ul><li><code>docker-compose up -d</code> Cria os containers sem travar o terminal<ul><li><code>docker-compose up -d --build</code> Cria os containers mas rebuildando as imagens. Útil quando o <code>Dockerfile</code> foi modificado e deve ser relido.</li><li>simplifica utilização de <code>docker build -t nome_do_container .</code> <code>docker container run -p 3000:3000 nome_do_container</code></li></ul></li><li><code>docker-compose down</code> Para e apaga todos containers criados</li><li><code>docker-compose exec &lt;service-name> &lt;comando> &lt;param1> &lt;param2>...</code> Executa um comando dentro do container, usos mais comuns:<ul><li><code>docker-compose exec app composer install</code> Instala as dependências do composer</li><li><code>docker-compose exec app composer test</code> Executa script <code>test</code> do composer</li><li><code>docker-compose exec app bash</code> Acessa &ldquo;terminal&rdquo; do container do <em>service</em> <code>app</code></li></ul></li></ul><h2 id=docker-composeyml><code>docker-compose.yml</code></h2><p>É uma &ldquo;receita&rdquo; para criar containers (especificando ordem e dependência) configurando instruções adicionais antes das criações das imagens</p><h3 id=glossário>Glossário</h3><ul><li><code>version</code> Compatibilidade do Docker Compose</li><li><code>services</code> Serviços (containers) que serão criados<ul><li>Evite usar <code>container_name</code>, pois com o Docker Compose, dentro do projeto, podemos executar comandos pelo nome do serviço como: <code>docker-compose exec &lt;service-name> &lt;command></code></li></ul></li><li><code>build</code> Usado ao invés de <code>image</code>, especifica local onde está o <code>Dockerfile</code> existente. Se estiver na mesma pasta que o <code>docker-compose.yml</code> utilize <code>.</code></li><li><code>image</code> Usado ao invés de <code>build</code>, especifica <a href=https://hub.docker.com/>imagem</a>, igual ao <code>FROM</code> do <code>Dockerfile</code></li><li><code>volumes</code> Lista de volumes que serão espelhados da sua &ldquo;máquina&rdquo; (<code>HOST</code>) para o container<ul><li>Exemplo: para <code>.:/var/www/html</code> significa que o projeto da pasta do <code>docker-compose.yml</code> é refletido em <code>/var/www/html</code>, onde que cada arquivo adicional criado/modificado em um é replicado em outro</li></ul></li><li><code>ports</code> Lista de espelhamentos de portas de um container em outro<ul><li>Exemplo: para <code>8081:80</code> requisições na porta <code>8081</code> da máquina local (<code>HOST</code>) são direcionadas para a porta <code>80</code> de dentro do container</li></ul></li><li><code>command</code> Comando que será executado ao iniciar o container. Normalmente usado para iniciar o servidor</li><li><code>environment</code> Variáveis de ambiente para serem utilizadas na imagem e/ou container. Sua utilização varia muito de imagem para imagem</li><li><code>working_dir</code> Diretório padrão do container. Quando for acessado é nessa pasta que iremos, o comum é deixar no espelhamento do volume</li></ul><h3 id=exemplos>Exemplos</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=color:#f92672>version</span>: <span style=color:#e6db74>&#34;3.3&#34;</span>

<span style=color:#f92672>services</span>:
  <span style=color:#f92672>app</span>:
    <span style=color:#f92672>build</span>: <span style=color:#ae81ff>docker/centos</span>
    <span style=color:#f92672>volumes</span>:
      - <span style=color:#ae81ff>.:/var/www/html</span>
    <span style=color:#f92672>working_dir</span>: <span style=color:#ae81ff>/var/www/html</span>
    <span style=color:#f92672>ports</span>:
      - <span style=color:#e6db74>&#39;8081:80&#39;</span>
    <span style=color:#f92672>command</span>: <span style=color:#ae81ff>/usr/sbin/httpd -DFOREGROUND</span>
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=color:#f92672>version</span>: <span style=color:#e6db74>&#34;3.3&#34;</span>

<span style=color:#f92672>services</span>:
  <span style=color:#f92672>db</span>:
    <span style=color:#f92672>restart</span>: <span style=color:#ae81ff>always</span>
    <span style=color:#f92672>image</span>: <span style=color:#ae81ff>postgres</span>
    <span style=color:#f92672>environment</span>:
      <span style=color:#f92672>POSTGRES_DB</span>: <span style=color:#ae81ff>dbname</span>
      <span style=color:#f92672>POSTGRES_USER</span>: <span style=color:#ae81ff>dbuser</span>
      <span style=color:#f92672>POSTGRES_PASSWORD</span>: <span style=color:#ae81ff>dbpwd</span>
    <span style=color:#f92672>ports</span>:
      - <span style=color:#e6db74>&#34;5432:5432&#34;</span>
    <span style=color:#f92672>volumes</span>:
      - <span style=color:#ae81ff>./docker/psql/init.sql:/docker-entrypoint-initdb.d/init.sql</span>

  <span style=color:#f92672>app</span>:
    <span style=color:#f92672>build</span>: <span style=color:#ae81ff>docker/php</span>
    <span style=color:#f92672>volumes</span>:
      - <span style=color:#ae81ff>.:/var/www/html</span>
    <span style=color:#f92672>working_dir</span>: <span style=color:#ae81ff>/var/www/html</span>
    <span style=color:#f92672>links</span>:
      - <span style=color:#ae81ff>db:db</span>
    <span style=color:#f92672>ports</span>:
      - <span style=color:#e6db74>&#39;8080:80&#39;</span>
    <span style=color:#f92672>depends_on</span>:
      - <span style=color:#ae81ff>db</span>
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=color:#f92672>version</span>: <span style=color:#e6db74>&#34;3&#34;</span>

<span style=color:#f92672>services</span>:
  <span style=color:#f92672>db</span>:
    <span style=color:#f92672>image</span>: <span style=color:#ae81ff>mysql:5.7</span>
    <span style=color:#f92672>environment</span>:
      <span style=color:#f92672>MYSQL_ROOT_PASSWORD</span>: <span style=color:#ae81ff>${MYSQL_ROOT_PASSWORD:?err}</span>
      <span style=color:#f92672>MYSQL_DATABASE</span>: <span style=color:#ae81ff>${MYSQL_DATABASE:?err}</span>
      <span style=color:#f92672>MYSQL_USER</span>: <span style=color:#ae81ff>${MYSQL_USER:?err}</span>
      <span style=color:#f92672>MYSQL_PASSWORD</span>: <span style=color:#ae81ff>${MYSQL_PASSWORD:?err}</span>
    <span style=color:#f92672>volumes</span>:
      - <span style=color:#ae81ff>./.docker/mysql-data:/var/lib/mysql</span>

  <span style=color:#f92672>app</span>:
    <span style=color:#f92672>build</span>: <span style=color:#ae81ff>.docker/php</span>
    <span style=color:#f92672>ports</span>:
      - <span style=color:#ae81ff>9000</span>:<span style=color:#ae81ff>9000</span>
    <span style=color:#f92672>volumes</span>:
      - <span style=color:#ae81ff>.:/var/www/html</span>
    <span style=color:#f92672>working_dir</span>: <span style=color:#ae81ff>/var/www/html</span>
    <span style=color:#f92672>depends_on</span>:
      - <span style=color:#ae81ff>db</span>
    <span style=color:#f92672>links</span>:
      - <span style=color:#ae81ff>db:db</span>

  <span style=color:#f92672>nginx</span>:
    <span style=color:#f92672>image</span>: <span style=color:#ae81ff>nginx:stable-alpine</span>
    <span style=color:#f92672>ports</span>:
      - <span style=color:#ae81ff>${APP_PORT-8080}:80</span>
    <span style=color:#f92672>volumes</span>:
      - <span style=color:#ae81ff>.:/var/www/html</span>
      - <span style=color:#ae81ff>./.docker/nginx/default.conf:/etc/nginx/conf.d/default.conf</span>
    <span style=color:#f92672>working_dir</span>: <span style=color:#ae81ff>/var/www/html</span>
    <span style=color:#f92672>depends_on</span>:
      - <span style=color:#ae81ff>app</span>


<span style=color:#75715e>#default.conf</span>
<span style=color:#75715e>#server {</span>
<span style=color:#75715e>#    listen 80;</span>
<span style=color:#75715e>#    index index.php;</span>
<span style=color:#75715e>#    server_name localhost;</span>
<span style=color:#75715e>#    root /var/www/html/public;</span>
<span style=color:#75715e>#    error_log /var/log/nginx/project_error.log;</span>
<span style=color:#75715e>#    access_log /var/log/nginx/project_access.log;</span>
<span style=color:#75715e>#</span>
<span style=color:#75715e>#    location / {</span>
<span style=color:#75715e>#        # try to serve file directly, fallback to index.php</span>
<span style=color:#75715e>#        try_files $uri /index.php$is_args$args;</span>
<span style=color:#75715e>#    }</span>
<span style=color:#75715e>#</span>
<span style=color:#75715e>#    location ~ ^/index\.php(/|$) {</span>
<span style=color:#75715e>#</span>
<span style=color:#75715e>#        # Sets the address of a FastCGI server. The address can be specified as a domain name or IP address, and a port</span>
<span style=color:#75715e>#        # fastcgi_pass php:9000;</span>
<span style=color:#75715e>#        fastcgi_pass app:9000;</span>
<span style=color:#75715e>#        fastcgi_split_path_info ^(.+\.php)(/.*)$;</span>
<span style=color:#75715e>#        include fastcgi_params;</span>
<span style=color:#75715e>#        fastcgi_param SCRIPT_FILENAME $realpath_root$fastcgi_script_name;</span>
<span style=color:#75715e>#        fastcgi_param DOCUMENT_ROOT $realpath_root;</span>
<span style=color:#75715e>#</span>
<span style=color:#75715e>#        # Avoid upstream sent too big header while reading error</span>
<span style=color:#75715e>#        # https://stackoverflow.com/questions/17708152/nginx-overwrites-general-symfony-errors-with-502-bad-gateway</span>
<span style=color:#75715e>#        fastcgi_buffer_size 128k;</span>
<span style=color:#75715e>#        fastcgi_buffers 4 256k;</span>
<span style=color:#75715e>#        fastcgi_busy_buffers_size 256k;</span>
<span style=color:#75715e>#</span>
<span style=color:#75715e>#        # Prevents URIs that include the front controller. This will 404:</span>
<span style=color:#75715e>#        # http://domain.tld/index.php/some-path</span>
<span style=color:#75715e>#        # Remove the internal directive to allow URIs like this</span>
<span style=color:#75715e>#        internal;</span>
<span style=color:#75715e>#    }</span>
<span style=color:#75715e>#</span>
<span style=color:#75715e>#    # return 404 for all other php files not matching the front controller</span>
<span style=color:#75715e>#    # this prevents access to other php files you don&#39;t want to be accessible.</span>
<span style=color:#75715e>#    location ~ \.php$ {</span>
<span style=color:#75715e>#        return 404;</span>
<span style=color:#75715e>#    }</span>
<span style=color:#75715e>#}</span>
</code></pre></div><h2 id=dockerfile><code>Dockerfile</code></h2><p>É uma &ldquo;receita&rdquo; para criar uma imagem e, a partir da dessa, criar um container. Deve iniciar de uma imagem existente (<code>FROM</code>) e depois customizá-la.</p><h3 id=glossário-1>Glossário</h3><p><a href=https://docs.docker.com/engine/reference/builder/>Especificação das instruções</a></p><ul><li><code>FROM</code> <a href=https://hub.docker.com/>Imagem</a> que vai ser usada como ponto de partida</li><li><code>ENV</code> Variável de ambiente que pode ser utilizada em scripts, instruções ou configurações de ambiente</li><li><code>RUN</code> Comando que vai ser executado no &ldquo;terminal&rdquo;. Novas linhas devem utilizar <code>\</code> e comandos diferentes devem ser usados com <code>&&</code> para serem executados na mesma instrução de <code>RUN</code><ul><li>Evite utilizar mútiplos <code>RUN</code>, o ideal é aglutinar em uma mesma instrução o máximo possível</li><li>Lembre de atualizar os pacotes na primeira instrução <code>RUN</code></li></ul></li><li><code>ADD</code> Copia arquivos, diretórios ou remotos para um local</li></ul><h3 id=exemplos-1>Exemplos</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Dockerfile data-lang=Dockerfile><span style=color:#66d9ef>FROM</span><span style=color:#e6db74> centos:centos7</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>ENV</span> PHALCON_VERSION phalcon-v1.3.4<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>ENV</span> PATH<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/opt/remi/php54/root/bin:</span><span style=color:#e6db74>${</span>PATH<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>RUN</span> yum -y update <span style=color:#f92672>&amp;&amp;</span> <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>    yum -y install <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>        gcc <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>        make <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>        epel-release <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>        httpd <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>        unzip<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>ADD</span> https://packages.microsoft.com/config/rhel/7/prod.repo /etc/yum.repos.d/mssql-release.repo<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>RUN</span> yum -y install http://rpms.remirepo.net/enterprise/remi-release-7.rpm <span style=color:#f92672>&amp;&amp;</span> <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>        yum-config-manager --enable remi-php54 <span style=color:#f92672>&amp;&amp;</span> <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>        ACCEPT_EULA<span style=color:#f92672>=</span>Y yum -y install <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>        php54-php <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>        php54-php-common <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>        php54-php-devel <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>        php54-php-mysqlnd <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>        php54-php-mbstring <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>        php54-php-soap <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>        php54-php-gd <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>        php54-php-ldap <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>        php54-php-pdo <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>        php54-php-intl <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>        php54-php-xml <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>        php54-php-sqlsrv <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>        php54-php-pear <span style=color:#f92672>&amp;&amp;</span> <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>        yum clean all;<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>ADD</span> https://github.com/phalcon/cphalcon/archive/$PHALCON_VERSION.tar.gz ./phalcon.tar.gz<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>RUN</span> rm -rf /var/cache/yum <span style=color:#f92672>&amp;&amp;</span> <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>        tar -xzf <span style=color:#f92672>{</span>PWD<span style=color:#f92672>}</span>/phalcon.tar.gz <span style=color:#f92672>&amp;&amp;</span> <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>        cd cphalcon-$PHALCON_VERSION/build <span style=color:#f92672>&amp;&amp;</span> <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>        ./install <span style=color:#f92672>&amp;&amp;</span> <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>        rm -rf /phalcon <span style=color:#f92672>&amp;&amp;</span> <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>        echo <span style=color:#e6db74>&#39;extension=phalcon.so&#39;</span> <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>        | tee /opt/remi/php54/root/etc/php.d/30-phalcon.ini;<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>RUN</span> curl -sS https://getcomposer.org/installer <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>        | php -- --install-dir<span style=color:#f92672>=</span>/usr/local/bin --filename<span style=color:#f92672>=</span>composer;<span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Dockerfile data-lang=Dockerfile><span style=color:#66d9ef>FROM</span><span style=color:#e6db74> php:7.4-apache</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>RUN</span> a2enmod rewrite<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>RUN</span> cp /usr/local/etc/php/php.ini-development /usr/local/etc/php/php.ini<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># THANKS: https://github.com/docker-library/php/issues/221#issuecomment-601129850</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>RUN</span> apt-get update; <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>    apt-get install -y libpq5 libpq-dev libzip-dev zip; <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>    docker-php-ext-install pdo pdo_pgsql zip; <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>    apt-get autoremove --purge -y libpq-dev; <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>    apt-get clean; <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>    rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* /usr/share/doc/*<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>RUN</span> curl -sS https://getcomposer.org/installer <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>        | php -- --install-dir<span style=color:#f92672>=</span>/usr/local/bin --filename<span style=color:#f92672>=</span>composer;<span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Dockerfile data-lang=Dockerfile><span style=color:#66d9ef>FROM</span><span style=color:#e6db74> php:8.0-fpm</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>RUN</span> apt-get update; <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>    apt-get install -y libpq5 libpq-dev libzip-dev zip; <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>    pecl install xdebug; <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>    docker-php-ext-install pdo pdo_mysql zip sysvsem; <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>    docker-php-ext-enable xdebug; <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>    echo <span style=color:#e6db74>&#34;xdebug.mode=coverage&#34;</span> &gt;&gt; /usr/local/etc/php/conf.d/xdebug.ini; <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>    apt-get autoremove --purge -y libpq-dev; <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>    apt-get clean ; <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>    rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* /usr/share/doc/*<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>RUN</span> curl -sS https://getcomposer.org/installer | php -- --install-dir<span style=color:#f92672>=</span>/usr/local/bin --filename<span style=color:#f92672>=</span>composer<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>RUN</span> curl -sS https://get.symfony.com/cli/installer | bash<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>RUN</span> mv /root/.symfony/bin/symfony /usr/local/bin/symfony<span style=color:#960050;background-color:#1e0010>
</span></code></pre></div></article></main></body></html>